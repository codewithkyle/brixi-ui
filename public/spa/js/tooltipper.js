class c{constructor(){this.clearTooltips=()=>{for(const o in this.trackedElements){const t=document.body.querySelector(`tool-tip[uid="${o}"]`);t&&t.isConnected&&t.remove()}},this.clickTooltip=o=>{const t=o.target?.closest("[tooltip]");if(!(t instanceof HTMLElement)||t?.getAttribute("tooltip")===null||o instanceof KeyboardEvent&&o.key!==" ")return;t.dataset.tooltipUid||(t.dataset.tooltipUid=r());const e=document.body.querySelector(`tool-tip[uid="${t.dataset.tooltipUid}"]`);e&&e?.remove()},this.showTooltip=o=>{const t=o.target;if(!(t instanceof HTMLElement)||t.getAttribute("tooltip")===null||typeof TouchEvent<"u"&&o instanceof TouchEvent||o instanceof FocusEvent&&this.deviceType!==1)return;let e=t.getAttribute("tooltip");if(e.length||(e=t.getAttribute("aria-label")),e.length||(e=t.getAttribute("title")),!e.length){console.warn("Tooltip could not be created -- missing aria-label, tooltip, or title attribute.");return}t.dataset.tooltipUid||(t.dataset.tooltipUid=r());let i=document.body.querySelector("tool-tip")||document.createElement("tool-tip");i.setAttribute("uid",t.dataset.tooltipUid),i.innerHTML=e,i.setAttribute("role","tooltip"),i.style.position="absolute",i.style.zIndex="999999",i.style.opacity="0",i.isConnected||document.body.appendChild(i),this.placeTooltip(t,i),i.classList.add("visible"),i.style.opacity="1",t.dataset.tooltipUid in this.trackedElements||(this.trackedElements[t.dataset.tooltipUid]=null)},this.hideTooltip=o=>{const t=o.target;if(!(t instanceof HTMLElement)||t?.getAttribute("tooltip")===null||!t?.dataset?.tooltipUid)return;const e=document.body.querySelector(`tool-tip[uid="${t.dataset.tooltipUid}"]`);e&&e.isConnected&&e.remove()},this.trackedElements={},this.deviceType=1,document.addEventListener("mouseenter",this.showTooltip,{capture:!0,passive:!0}),document.addEventListener("focus",this.showTooltip,{capture:!0,passive:!0}),document.addEventListener("mouseleave",this.hideTooltip,{capture:!0,passive:!0}),document.addEventListener("blur",this.hideTooltip,{capture:!0,passive:!0}),document.addEventListener("click",this.clickTooltip,{capture:!0,passive:!0}),document.addEventListener("keypress",this.clickTooltip,{capture:!0,passive:!0}),document.addEventListener("touchstart",()=>{this.deviceType=2},{capture:!0,passive:!0}),document.addEventListener("mousemove",()=>{this.deviceType=1},{capture:!0,passive:!0}),window.addEventListener("scroll",this.clearTooltips,{capture:!0,passive:!0}),window.addEventListener("resize",this.clearTooltips,{capture:!0,passive:!0}),this.tick()}tick(){for(const o in this.trackedElements){const t=document.body.querySelector(`[data-tooltip-uid="${o}"]`),e=document.body.querySelector(`tool-tip[uid="${o}"]`);if(t==null)delete this.trackedElements[o],e&&e.isConnected&&e.remove();else if(e!=null){let i=t.getAttribute("tooltip")||"";i.length||(i=t.getAttribute("aria-label")||""),i.length||(i=t.getAttribute("title")||""),i!==e.innerHTML&&(e.innerHTML=i,this.placeTooltip(t,e))}}window.requestAnimationFrame(this.tick.bind(this))}placeTooltip(o,t){const e=o.getBoundingClientRect(),i=t.getBoundingClientRect();let n=e.left+e.width/2-i.width/2;if(n+i.width>window.innerWidth-4){const d=n+i.width-window.innerWidth+4;n-=d}else n<4&&(n=4);let l=e.top+e.height-window.scrollY;l+i.height>window.innerHeight-4?l=e.top-i.height:l+i.height>window.scrollY&&(l=e.top+e.height+window.scrollY),t.style.top=`${l}px`,t.style.left=`${n}px`}}function r(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,s=>(s^crypto.getRandomValues(new Uint8Array(1))[0]&15>>s/4).toString(16))}const u=new c;var a=u;export{a as default};
