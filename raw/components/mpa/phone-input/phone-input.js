var l=Object.defineProperty;var u=(i,e,t)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>(u(i,typeof e!="symbol"?e+"":e,t),t);class E extends HTMLElement{constructor(){super();r(this,"onBlur",()=>{if(this.inputEl!=null){if(this.inputEl.value=this.formatPhoneNumber(),this.inputEl.required&&this.inputEl.value.trim().length==0){this.renderError("This field is required.");return}else if(this.inputEl?.minLength!==-1&&this.inputEl.value.length<this.inputEl.minLength){this.renderError(`This field must be at least ${this.inputEl.minLength} characters.`);return}else if(this.inputEl.maxLength!==-1&&this.inputEl.value.length>this.inputEl.maxLength){this.renderError(`This field must be less than ${this.inputEl.maxLength} characters.`);return}this.clearError()}});r(this,"onFocus",()=>{this.inputEl.value=this.inputEl.value?.toString()?.replace(/[\-\+\s\(\)]/g,"")??""});r(this,"onInput",()=>{this.clearError()})}connectedCallback(){if(this.inputEl=this.querySelector("input"),this.descEl=this.querySelector("p"),this.descEl==null){this.descEl=document.createElement("p");const t=this.querySelector("input-container");this.insertBefore(this.descEl,t)}this.instructions=this.descEl?.innerHTML??"",this.inputEl?.addEventListener("blur",this.onBlur.bind(this)),this.inputEl?.addEventListener("input",this.onInput.bind(this)),this.inputEl?.addEventListener("focus",this.onFocus.bind(this))}formatPhoneNumber(){var t=this.inputEl.value.replace(/\D/g,""),n=t.match(/^(1|)?(\d{3})(\d{3})(\d{4})$/);if(n){var s=n[1]?"+1 ":"";return[s,"(",n[2],") ",n[3],"-",n[4]].join("")}return t}renderError(t){this.inputEl!=null&&(this.setAttribute("state","ERROR"),this.descEl.innerHTML=t)}clearError(){this.inputEl==null||this.inputEl.getAttribute("state")==="IDLING"||(this.setAttribute("state","IDLING"),this.descEl!=null&&(this.descEl.innerHTML=this.instructions))}}export{E as BrixiPhoneInputComponent};
