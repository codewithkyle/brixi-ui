import s from"./env.js";import n from"./component.js";const i="[form-input]";s.css(["form"]);class o extends n{constructor(){super(...arguments);this.handleReset=e=>{e.preventDefault(),this.reset()}}connected(){this.render(),this.setAttribute("role","form"),this.addEventListener("reset",this.handleReset)}start(){const e=this.querySelector("brixi-submit-button");e&&e.trigger("START")}stop(){const e=this.querySelector('brixi-submit-button[state="SUBMITTING"]');e&&e.trigger("STOP")}reset(){this.querySelectorAll(i).forEach(e=>{e.reset()})}serialize(){this.start();const e={};return this.querySelectorAll(i).forEach(r=>{const t=r.getName();t==null||t===""?console.error("Form input is missing a name attribute.",r):e[t]=r.getValue()}),e}checkValidity(){let e=!0;return this.querySelectorAll(i).forEach(r=>{r.validate()||(e=!1)}),e}fail(e){const r={};this.querySelectorAll(i).forEach(t=>{r[t.getName()]=t});for(const t in e)r?.[t]?.setError(e[t]);this.stop()}}s.bind("brixi-form",o);export{o as default};
