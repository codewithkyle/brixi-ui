import{html as a,render as l}from"./lit-html.js";import r from"./supercomponent.js";import o from"./env.js";import{noop as c,parseDataset as g}from"./general.js";import s from"./button.js";class n extends r{constructor(t){super(),this.model={css:"",class:"",attributes:{},itemsPerPage:0,totalPages:0,callback:c,activePage:1},this.model=g(this.dataset,this.model),o.css(["pagination","buttons"]).then(()=>{this.set(t,!0),this.render()})}back(){this.processPageChange(this.model.activePage-1)}forward(){this.processPageChange(this.model.activePage+1)}jumpToPage(t){this.processPageChange(t)}processPageChange(t){const e=this.get();e.activePage=t,e.activePage<0?e.activePage=0:e.activePage>e.totalPages&&(e.activePage=e.totalPages),this.set(e),this.model.callback(e.activePage)}calcVisiblePageNumbers(){let t=[];if(this.model.totalPages<=5)for(let e=1;e<=this.model.totalPages;e++)t.push(e);else this.model.activePage<=2?t=[1,2,3,4,5]:this.model.activePage>=this.model.totalPages-2?t=[this.model.totalPages-4,this.model.totalPages-3,this.model.totalPages-2,this.model.totalPages-1,this.model.totalPages]:t=[this.model.activePage-2,this.model.activePage-1,this.model.activePage,this.model.activePage+1,this.model.activePage+2];return t}render(){this.className=this.model.class,this.style.cssText=this.model.css,Object.keys(this.model.attributes).map(i=>{this.setAttribute(i,`${this.model.attributes[i]}`)});const t=this.calcVisiblePageNumbers(),e=a`
            ${new s({callback:this.back.bind(this),disabled:this.model.activePage===1,kind:"text",color:"grey",size:"slim",tooltip:"Back",iconPosition:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="15 6 9 12 15 18"></polyline></svg>'})}
            ${t.map(i=>a`
                    ${new s({callback:()=>{this.jumpToPage(i)},kind:"text",color:"grey",css:"min-width: 36px;",class:i===this.model.activePage?"is-active":"",label:i.toString()})}
                `)}
            ${new s({callback:this.forward.bind(this),disabled:this.model.activePage===this.model.totalPages,kind:"text",color:"grey",size:"slim",tooltip:"Next",iconPosition:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><polyline points="9 6 15 12 9 18"></polyline></svg>'})}
        `;l(e,this)}}o.bind("pagination-component",n);export{n as default};
