class o extends HTMLElement{constructor(s){super(),this.handleActionButtonClick=t=>{const e=t.currentTarget,i=parseInt(e.dataset.index);this.settings.buttons[i].callback(),this.remove()},this.handleCloseClickEvent=()=>{this.remove()},this.settings=s,this.render()}render(){this.dataset.uid=this.settings.uid;for(let t=0;t<this.settings.classes.length;t++)this.classList.add(this.settings.classes[t]);this.innerHTML=`
            <p role="${this.settings.closeable||this.settings.buttons.length?"alertdialog":"alert"}">${this.settings.message}</p>
            ${this.settings.closeable||this.settings.buttons.length?`
                <snackbar-actions>
                    ${this.settings.buttons.map((t,e)=>`<button ${t?.ariaLabel?`aria-label="${t.ariaLabel}"`:""} data-index="${e}" class="${t.classes?.join(" ")}">${t.label}</button>`)}
                    ${this.settings.closeable?`
                        <button aria-label="close notification" class="close js-snackbar-close">
                            <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"></path></svg>
                        </button>
                    `:""}
                </snackbar-actions>
            `:""}
        `,this.querySelectorAll("button[data-index]").forEach(t=>{t.addEventListener("click",this.handleActionButtonClick)});const s=this.querySelector(".close");s&&s.addEventListener("click",this.handleCloseClickEvent)}connectedCallback(){if(this.settings.autofocus){const s=this.querySelector(".js-snackbar-close");s&&(document.activeElement.blur(),s.focus())}if(this.settings.buttons.length){for(let s=0;s<this.settings.buttons.length;s++)if(this.settings.buttons[s]?.autofocus){const t=this.querySelector(`button[data-index="${s}"]`);if(t){document.activeElement.blur(),t.focus();break}}}}}class l extends HTMLElement{constructor(s){super(),this.handleCloseClickEvent=()=>{this.remove()},this.handleActionButtonClick=t=>{const e=t.currentTarget,i=parseInt(e.dataset.index);this.settings.buttons[i].callback(),this.remove()},this.settings=s,this.render()}render(){this.dataset.uid=this.settings.uid;for(let t=0;t<this.settings.classes.length;t++)this.classList.add(this.settings.classes[t]);this.innerHTML=`
            ${this.settings.icon?`
                <i>${this.settings.icon}</i>
            `:""}
            <copy-wrapper>
                <h3 role="${this.settings.closeable?"alertdialog":"alert"}">${this.settings.title}</h3>
                <p>${this.settings.message}</p>
                ${this.settings.buttons.length?`
                    <toast-actions>
                    ${this.settings.buttons.map((t,e)=>`<button class="${t.classes?.join(" ")}" data-index="${e}" ${t?.ariaLabel?`aria-label="${t.ariaLabel}"`:""}>${t.label}</button>`)}
                    </toast-actions>
            `:""}
            </copy-wrapper>
            ${this.settings.closeable?`
                <button aria-label="close notification" class="close js-toast-close">
                    <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="times" class="svg-inline--fa fa-times fa-w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M207.6 256l107.72-107.72c6.23-6.23 6.23-16.34 0-22.58l-25.03-25.03c-6.23-6.23-16.34-6.23-22.58 0L160 208.4 52.28 100.68c-6.23-6.23-16.34-6.23-22.58 0L4.68 125.7c-6.23 6.23-6.23 16.34 0 22.58L112.4 256 4.68 363.72c-6.23 6.23-6.23 16.34 0 22.58l25.03 25.03c6.23 6.23 16.34 6.23 22.58 0L160 303.6l107.72 107.72c6.23 6.23 16.34 6.23 22.58 0l25.03-25.03c6.23-6.23 6.23-16.34 0-22.58L207.6 256z"></path></svg>
                </button>
            `:""}
            ${this.settings.timer?`
                <toast-timer class="${this.settings.timer}" style="transform: ${this.settings.timer==="horizontal"?"scaleX(1)":"scaleY(1)"};"></toast-timer>
            `:""}
        `,this.querySelectorAll("button[data-index]").forEach(t=>{t.addEventListener("click",this.handleActionButtonClick)});const s=this.querySelector(".js-toast-close");s&&s.addEventListener("click",this.handleCloseClickEvent)}connectedCallback(){if(this.settings.autofocus){const s=this.querySelector(".js-toast-close");s&&(document.activeElement.blur(),s.focus())}if(this.settings.buttons.length){for(let s=0;s<this.settings.buttons.length;s++)if(this.settings.buttons[s]?.autofocus){const t=this.querySelector(`button[data-index="${s}"]`);if(t){t.focus();break}}}}}class r{constructor(){this.shell=document.body.querySelector("toaster-component"),this.shell===null&&(this.shell=document.createElement("toaster-component"),document.body.appendChild(this.shell)),this.snackbarQueue=[],this.toaster=[],this.time=performance.now(),this.loop()}uid(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}loop(){const s=performance.now(),t=(s-this.time)/1e3;if(this.time=s,document.hasFocus()){for(let e=this.toaster.length-1;e>=0;e--)if(this.toaster[e]?.duration&&this.toaster[e]?.duration!==1/0){if(this.toaster[e].duration-=t,this.toaster[e].timer){const i=this.toaster[e].duration/this.toaster[e].timerDuration;this.toaster[e].timer==="vertical"?this.toaster[e].timerEl.style.transform=`scaleY(${i})`:this.toaster[e].timerEl.style.transform=`scaleX(${i})`}this.toaster[e].duration<=0&&(this.toaster[e].el.remove(),this.toaster.splice(e,1))}this.snackbarQueue.length&&(this.snackbarQueue?.[0]?.el||(this.snackbarQueue[0].el=new o(this.snackbarQueue[0]),document.body.appendChild(this.snackbarQueue[0].el)),this.snackbarQueue[0]?.duration&&this.snackbarQueue[0]?.duration!==1/0&&this.snackbarQueue[0]?.el?.isConnected&&(this.snackbarQueue[0].duration-=t,this.snackbarQueue[0].duration<=0&&(this.snackbarQueue[0].el.remove(),this.snackbarQueue.splice(0,1))))}window.requestAnimationFrame(this.loop.bind(this))}snackbar(s){const t=Object.assign({message:"Snackbar notificaitons require a message",uid:this.uid(),el:null,duration:30,closeable:!0,buttons:[],force:!0,classes:[],autofocus:!0},s);Array.isArray(t.buttons)||(t.buttons=[t.buttons]),Array.isArray(t.classes)||(t.classes=[t.classes]),t.force&&this.snackbarQueue.length?(this.snackbarQueue[0]?.el?.isConnected&&this.snackbarQueue[0].el.remove(),this.snackbarQueue.splice(0,1,t)):this.snackbarQueue.push(t)}toast(s){const t=Object.assign({title:"Title Required",message:"Toast notificaitons require a message",closeable:!0,icon:null,duration:30,classes:[],uid:this.uid(),el:null,timerEl:null,autofocus:!0,buttons:[],timer:null,timerDuration:30},s);Array.isArray(t.buttons)||(t.buttons=[t.buttons]),Array.isArray(t.classes)||(t.classes=[t.classes]),(t.duration!==1/0&&t.timer==="vertical"||t.timer==="horizontal")&&(t.timerDuration=t.duration),t.el=new l(t),t.timer&&(t.timerEl=t.el.querySelector("toast-timer")),this.toaster.push(t),this.shell.appendChild(t.el)}append(s){this.shell.appendChild(s)}}const a=new r,c=a.snackbar.bind(a),u=a.toast.bind(a),h=a.append.bind(a);customElements.define("snackbar-component",o),customElements.define("toast-component",l);export{r as Notifier,h as append,c as snackbar,u as toast};
