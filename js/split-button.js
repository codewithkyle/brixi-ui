import{html as s,render as r}from"./lit-html.js";import o from"./supercomponent.js";import n from"./env.js";import{noop as l,parseDataset as u}from"./general.js";import{unsafeHTML as a}from"./unsafe-html.js";import p from"./overflow-menu.js";import{UUID as m}from"./uuid.js";class i extends o{constructor(t){super();this.hideMenu=()=>{const t=this.querySelector("button-menu");t&&(t.style.visibility="hidden")};this.handlePrimaryClick=()=>{this.model.callback()};this.openMenu=()=>{const t=new p({target:this,uid:this.uid,items:this.model.buttons,offset:4});document.body.appendChild(t)};this.uid=m(),this.model={css:"",class:"",attributes:{},type:"button",label:"",buttons:[],icon:"",callback:l},this.model=u(this.dataset,this.model),n.css(["split-button","button"]).then(()=>{this.set(t,!0),this.render()})}renderIcon(t){let e;return t instanceof HTMLElement?e=s` <i class="icon">${t}</i> `:typeof t=="string"&&t.length?e=s` <i class="icon"> ${a(t)} </i> `:e="",e}renderLabel(t){let e;return t?e=s` <span>${t}</span> `:e="",e}renderPrimaryButton(){return s` <button type=${this.model.type} @click=${this.handlePrimaryClick}>${this.renderIcon(this.model.icon)} ${this.renderLabel(this.model.label)}</button> `}renderMenuButtons(){let t;return this.model.buttons.length?t=s`
                <button class="split" aria-label="Open button menu" type="button" @click=${this.openMenu} @focus=${this.hideMenu}>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            `:t="",t}render(){this.className=this.model.class,this.style.cssText=this.model.css,Object.keys(this.model.attributes).map(e=>{this.setAttribute(e,`${this.model.attributes[e]}`)});const t=s` ${this.renderPrimaryButton()} ${this.renderMenuButtons()} `;r(t,this)}}n.bind("split-button",i);export{i as default};
