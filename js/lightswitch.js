import c from"./supercomponent.js";import{html as a,render as h}from"./lit-html.js";import{unsafeHTML as i}from"./unsafe-html.js";import r from"./env.js";import n from"./soundscape.js";import{noop as d,parseDataset as m}from"./general.js";class o extends c{constructor(e){super();this.handleChange=e=>{const t=e.currentTarget;this.update({enabled:t.checked}),this.model.callback(t.checked),t.checked?n.activate():n.deactivate()};this.model={name:"",label:"",labelIcon:"",altLabel:"",altLabelIcon:"",enabled:!1,disabled:!1,callback:d,color:"primary",css:"",class:"",attributes:{}},this.model=m(this.dataset,this.model),r.css("lightswitch").then(()=>{this.set(e,!0),this.render()})}getName(){return this.model.name}getValue(){return this.model.enabled}renderText(e){let t;return e.length?t=a` <div>${e}</div> `:t="",t}render(){this.setAttribute("color",this.model.color);const e=`${this.model.altLabel.replace(/\s+/g,"-").trim()}-${this.model.name}-${this.model.label.replace(/\s+/g,"-").trim()}`,t=a`
            <input @change=${this.handleChange} type="checkbox" name="${this.model.name}" id="${e}" ?disabled=${this.model.disabled} .checked=${this.model.enabled} />
            <label for="${e}">
                <span> ${i(this.model.altLabelIcon)} ${this.renderText(this.model.altLabel)} </span>
                <i></i>
                <span> ${i(this.model.labelIcon)} ${this.renderText(this.model.label)} </span>
            </label>
        `;this.className=this.model.class,this.style.cssText=this.model.css,Object.keys(this.model.attributes).map(s=>{this.setAttribute(s,`${this.model.attributes[s]}`)}),h(t,this)}updated(){setTimeout(()=>{const e=this.querySelector("label"),t=e.querySelector("span:first-of-type"),s=e.querySelector("span:last-of-type"),l=this.querySelector("i");this.model.enabled?(e.style.width=`${t.scrollWidth+23+16}px`,t.style.transform="translateX(0)",s.style.transform="translateX(0)",l.style.transform="translateX(0)"):(e.style.width=`${s.scrollWidth+23+18}px`,t.style.transform=`translateX(-${t.scrollWidth+8}px)`,s.style.transform=`translateX(-${t.scrollWidth+8}px)`,l.style.transform=`translateX(-${t.scrollWidth+8}px)`)},60)}}r.mount("lightswitch-component",o);export{o as default};
