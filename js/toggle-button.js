import{html as s,render as r}from"./lit-html.js";import o from"./supercomponent.js";import n from"./env.js";import a from"./button.js";import{parseDataset as u}from"./general.js";class i extends o{constructor(e){super();this.handleClick=e=>{e.preventDefault(),e.stopImmediatePropagation(),this.model.buttons[this.model.states[this.model.index]].callback();const t=this.get();t.index++,t.index>=t.states.length&&(t.index=0),t.state=t.states[t.index],this.update(t)};this.model={state:null,states:[],buttons:{},instructions:"",css:"",class:"",attributes:{},index:0},this.model=u(this.dataset,this.model),n.css(["toggle-button","button"]).then(()=>{this.set(e,!0),this.render()})}connected(){this.addEventListener("click",this.handleClick,{passive:!1,capture:!0})}renderButton(){return new a(this.model.buttons[this.model.state])}renderInstructions(){let e;return this.model.instructions.length?e=s` <p>${this.model.instructions}</p> `:e="",e}render(){this.style.cssText=this.model.css,this.className=this.model.class,Object.keys(this.model.attributes).map(t=>{this.setAttribute(t,`${this.model.attributes[t]}`)});const e=s` ${this.renderInstructions()} ${this.renderButton()} `;r(e,this)}}n.mount("toggle-button",i);export{i as default};
